<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4SP - CREATE LINK</title>
    <meta name="description" content="Guide to creating your own 4SP link using various hosting providers.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="navigation-mini.js" defer></script>

    <style>
        html { scroll-behavior: smooth; }
        :root {
            --geist-foreground: 255, 255, 255;
            --geist-background: 0, 0, 0;
        }
        .dark { color-scheme: dark; }
        body { font-family: 'Geist', sans-serif; padding-top: 4rem; }
        
        /* Gradient Text Logic */
        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-image: linear-gradient(90deg, #3b82f6, #60a5fa); /* Default Blue */
            transition: background-image 0.5s ease;
        }

        /* Gradient Variations */
        .gradient-dynu { background-image: linear-gradient(90deg, #3b82f6, #2563eb); }
        .gradient-github { background-image: linear-gradient(90deg, #a855f7, #d946ef); }
        .gradient-cloudflare { background-image: linear-gradient(90deg, #f97316, #fb923c); }
        .gradient-vercel { background-image: linear-gradient(90deg, #ffffff, #9ca3af); }
        .gradient-fastly { background-image: linear-gradient(90deg, #ef4444, #f87171); }
        .gradient-domain { background-image: linear-gradient(90deg, #22c55e, #4ade80); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #444; }

        /* List Items */
        .step-list-item {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .step-list-item::before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #6b7280;
        }

        /* --- CUSTOM BUTTON STYLES --- */
        .custom-tab-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #9ca3af;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Geist', sans-serif;
        }
        .custom-tab-btn:hover { background: rgba(255, 255, 255, 0.1); color: #e5e7eb; }

        /* Active States */
        #btn-dynu.active { color: #3b82f6; border-color: #3b82f6; background: rgba(59, 130, 246, 0.1); box-shadow: 0 0 15px rgba(59, 130, 246, 0.2); }
        #btn-github.active { color: #a855f7; border-color: #a855f7; background: rgba(168, 85, 247, 0.1); box-shadow: 0 0 15px rgba(168, 85, 247, 0.2); }
        #btn-cloudflare.active { color: #f97316; border-color: #f97316; background: rgba(249, 115, 22, 0.1); box-shadow: 0 0 15px rgba(249, 115, 22, 0.2); }
        #btn-vercel.active { color: #ffffff; border-color: #ffffff; background: rgba(255, 255, 255, 0.1); box-shadow: 0 0 15px rgba(255, 255, 255, 0.2); }
        #btn-fastly.active { color: #ef4444; border-color: #ef4444; background: rgba(239, 68, 68, 0.1); box-shadow: 0 0 15px rgba(239, 68, 68, 0.2); }
        #btn-domain.active { color: #22c55e; border-color: #22c55e; background: rgba(34, 197, 94, 0.1); box-shadow: 0 0 15px rgba(34, 197, 94, 0.2); }
        
        /* Tab Content */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- TERMINAL STYLE --- */
        .terminal-window {
            background-color: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            overflow: hidden;
            font-family: 'Geist Mono', monospace;
            margin-top: 1rem;
        }
        .terminal-header {
            background-color: #161b22;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #30363d;
        }
        .terminal-dots {
            display: flex;
            gap: 6px;
        }
        .terminal-dot { width: 10px; height: 10px; border-radius: 50%; }
        .dot-red { background-color: #ff5f56; }
        .dot-yellow { background-color: #ffbd2e; }
        .dot-green { background-color: #27c93f; }
        
        .copy-btn {
            font-size: 0.75rem;
            color: #8b949e;
            cursor: pointer;
            transition: color 0.2s;
            background: none;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        .copy-btn:hover { color: #c9d1d9; }
        
        .terminal-body {
            padding: 1rem;
            overflow-x: auto;
            color: #c9d1d9;
            font-size: 0.85rem;
            line-height: 1.5;
        }
        /* Syntax highlighting simple override */
        .code-keyword { color: #ff7b72; } /* red/pink */
        .code-function { color: #d2a8ff; } /* purple */
        .code-string { color: #a5d6ff; } /* blue */
        .code-comment { color: #8b949e; } /* gray */

        /* Cloudflare Version Toggle Buttons */
        .cf-ver-btn {
            font-size: 0.85rem;
            padding: 0.4rem 1rem;
            border-radius: 10px; /* UPDATED: More rounded */
            border: 1px solid #374151;
            color: #9ca3af;
            background: transparent;
            transition: all 0.2s;
        }
        .cf-ver-btn:hover {
            border-color: #f97316;
            color: #fdba74;
        }
        .cf-ver-btn.active {
            background: rgba(249, 115, 22, 0.15);
            border-color: #f97316;
            color: #f97316;
        }
    </style>
</head>
<body class="bg-black text-white min-h-screen flex flex-col">

    <main class="flex-grow">
        <section class="text-center border-b border-gray-900 py-16">
            <div class="mx-auto max-w-4xl px-4">
                <h1 class="text-5xl sm:text-6xl font-light tracking-tighter mb-6 leading-tight">
                    <span id="main-title" class="gradient-text gradient-dynu font-bold">Create a 4SP Link.</span>
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto font-light leading-relaxed">
                    Host your own instance of 4simpleproblems. Choose your preferred provider below to get started.
                </p>
                
                <div class="flex flex-wrap justify-center gap-4 mt-8">
                    <button onclick="switchTab('dynu')" id="btn-dynu" class="custom-tab-btn active">Dynu & GitHub</button>
                    <button onclick="switchTab('github')" id="btn-github" class="custom-tab-btn">GitHub Pages</button>
                    <button onclick="switchTab('cloudflare')" id="btn-cloudflare" class="custom-tab-btn">Cloudflare</button>
                    <button onclick="switchTab('vercel')" id="btn-vercel" class="custom-tab-btn">Vercel</button>
                    <button onclick="switchTab('fastly')" id="btn-fastly" class="custom-tab-btn">Fastly</button>
                    <button onclick="switchTab('domain')" id="btn-domain" class="custom-tab-btn">Free Domain</button>
                </div>
            </div>
        </section>

        <div class="mx-auto max-w-6xl px-4 py-16 min-h-[500px]">

            <div id="content-dynu" class="tab-content active space-y-12">
                <div class="mb-8">
                    <span class="text-sm font-light text-blue-400 uppercase tracking-widest mb-2 block">Free URL Hosting</span>
                    <h2 class="text-4xl font-light mb-6">Dynu & GitHub Pages</h2>
                    <p class="text-xl text-gray-400 font-light leading-relaxed">
                        This method uses GitHub Pages for hosting and Dynu to create a custom, free URL for your site.
                    </p>
                </div>
                <div class="space-y-12 border-l border-gray-800 pl-6">
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 0: Create a GitHub account</h3>
                        <p class="text-gray-400 font-light mb-2">Go to <a href="https://github.com" target="_blank" class="text-blue-400 hover:underline">github.com</a> and create an account.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 1: Fork the main 4SP repository</h3>
                        <p class="text-gray-400 font-light mb-2">Go to the current 4SP GitHub repository. Click Fork to your own account.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 2: Turn on GitHub Pages</h3>
                        <p class="text-gray-400 font-light mb-2">Go to Settings > Pages. Set Source to <code>main</code> and <code>root</code>. Save.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 3: Fork the games repositories</h3>
                        <p class="text-gray-400 font-light mb-2">Fork the <code>GAMES</code> repository and all <code>strongdog</code> repositories (2-5).</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 4: Create Dynu Domain</h3>
                        <p class="text-gray-400 font-light mb-2">Create a DDNS service (Option 1) on Dynu.com.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 5: Link Dynu</h3>
                        <p class="text-gray-400 font-light mb-2">Create a CNAME record in Dynu pointing to your <code>github.io</code> URL.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 6: Get Authorized</h3>
                        <p class="text-gray-400 font-light mb-2">
                            DM your link to <a href="https://discord.com/users/1380703045754552340" target="_blank" class="text-blue-400 underline hover:text-blue-300">4SP on Discord</a>.
                        </p>
                    </div>
                </div>
            </div>

            <div id="content-github" class="tab-content space-y-12">
                <div class="mb-8">
                    <span class="text-sm font-light text-purple-400 uppercase tracking-widest mb-2 block">Direct Hosting</span>
                    <h2 class="text-4xl font-light mb-6">GitHub Pages (Standard)</h2>
                    <p class="text-xl text-gray-400 font-light leading-relaxed">
                        The simplest method. Host directly on GitHub using a standard github.io address.
                    </p>
                </div>
                <div class="space-y-12 border-l border-gray-800 pl-6">
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 1: Fork Repository</h3>
                        <p class="text-gray-400 font-light mb-2">Fork the main 4SP repository to your GitHub account.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 2: Enable Pages</h3>
                        <p class="text-gray-400 font-light mb-2">In Settings > Pages, enable hosting from the main branch.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 3: Fork the games repositories</h3>
                        <p class="text-gray-400 font-light mb-2">Fork the <code>GAMES</code> repository and all <code>strongdog</code> repositories (2-5).</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 4: Authorize</h3>
                        <p class="text-gray-400 font-light mb-2">
                            Send your <code>username.github.io</code> link to <a href="https://discord.com/users/1380703045754552340" target="_blank" class="text-purple-400 underline hover:text-purple-300">4SP on Discord</a>.
                        </p>
                    </div>
                </div>
            </div>

            <div id="content-cloudflare" class="tab-content space-y-12">
                <div class="mb-8">
                    <span class="text-sm font-light text-orange-400 uppercase tracking-widest mb-2 block">Performance & Security</span>
                    <h2 class="text-4xl font-light mb-6">Cloudflare Workers</h2>
                    <p class="text-xl text-gray-400 font-light leading-relaxed">
                        Create a high-speed proxy application using Cloudflare Workers.
                    </p>
                </div>

                <div class="space-y-12 border-l border-gray-800 pl-6">
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 1: Create Application</h3>
                        <p class="text-gray-400 font-light mb-2">
                            Sign up or log in to <a href="https://dash.cloudflare.com/" target="_blank" class="text-orange-400 hover:underline">Cloudflare</a>.
                        </p>
                        <ul class="text-gray-400 font-light mt-2">
                            <li class="step-list-item">On the dashboard sidebar, select <strong>Workers & Pages</strong>.</li>
                            <li class="step-list-item">Click <strong>Create application</strong>.</li>
                            <li class="step-list-item">Click <strong>Create Worker</strong> (or "Start with Hello World").</li>
                            <li class="step-list-item">Change the name of the subdomain to anything you want (this is your link).</li>
                            <li class="step-list-item">Click <strong>Deploy</strong>.</li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 2: Edit Code</h3>
                        <p class="text-gray-400 font-light mb-4">
                            Select which version of 4SP you want to host, then replace your worker code with the script below.
                        </p>
                        
                        <div class="flex items-center gap-3 mb-2">
                            <button onclick="setCloudflareVersion('std')" id="cf-ver-std" class="cf-ver-btn active">Host 4SP</button>
                            <button onclick="setCloudflareVersion('max')" id="cf-ver-max" class="cf-ver-btn">Host 4SP MAX</button>
                        </div>

                        <div class="terminal-window">
                            <div class="terminal-header">
                                <div class="terminal-dots">
                                    <div class="terminal-dot dot-red"></div>
                                    <div class="terminal-dot dot-yellow"></div>
                                    <div class="terminal-dot dot-green"></div>
                                </div>
                                <button onclick="copyCloudflareCode()" class="copy-btn">
                                    <i class="fa-regular fa-copy"></i> Copy Code
                                </button>
                            </div>
                            <pre class="terminal-body"><code id="cf-code"><span class="code-keyword">export default</span> {
  <span class="code-keyword">async</span> <span class="code-function">fetch</span>(request, env, ctx) {
    <span class="code-keyword">const</span> ORIGIN_HOST = <span class="code-string">"4simpleproblems.kozow.com"</span>;

    <span class="code-keyword">const</span> url = <span class="code-keyword">new</span> URL(request.url);

    <span class="code-comment">// Build the origin URL with full path + query</span>
    <span class="code-keyword">const</span> originUrl = <span class="code-keyword">new</span> URL(request.url);
    originUrl.hostname = ORIGIN_HOST;
    originUrl.protocol = <span class="code-string">"https:"</span>;

    <span class="code-comment">// Forward request to origin</span>
    <span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(originUrl.toString(), {
      method: request.method,
      headers: request.headers,
      body: request.method === <span class="code-string">"GET"</span> || request.method === <span class="code-string">"HEAD"</span>
        ? <span class="code-keyword">null</span>
        : request.body,
      redirect: <span class="code-string">"manual"</span>,
    });

    <span class="code-comment">// Clone headers so we can safely modify them</span>
    <span class="code-keyword">const</span> newHeaders = <span class="code-keyword">new</span> Headers(response.headers);

    <span class="code-comment">// Optional but recommended</span>
    newHeaders.set(<span class="code-string">"X-Proxied-By"</span>, <span class="code-string">"Cloudflare-Worker-4SP"</span>);
    newHeaders.set(<span class="code-string">"Cache-Control"</span>, <span class="code-string">"public, max-age=600"</span>);

    <span class="code-keyword">return new</span> Response(response.body, {
      status: response.status,
      statusText: response.statusText,
      headers: newHeaders,
    });
  }
};</code></pre>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 3: Deploy</h3>
                        <p class="text-gray-400 font-light mb-2">
                            Configure the target URL in the code you just pasted.
                        </p>
                        <ul class="text-gray-400 font-light mt-2">
                            <li class="step-list-item">Click <strong>Save and Deploy</strong> in the top right corner.</li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 4: Authorize</h3>
                        <p class="text-gray-400 font-light mb-2">
                            Copy your final Cloudflare URL and send it to the <a href="https://discord.com/users/1380703045754552340" target="_blank" class="text-orange-400 underline hover:text-orange-300">4SP Discord account</a> to be authorized.
                        </p>
                    </div>
                </div>
            </div>

            <div id="content-vercel" class="tab-content space-y-12">
                <div class="mb-8">
                    <span class="text-sm font-light text-white uppercase tracking-widest mb-2 block">Modern Deployment</span>
                    <h2 class="text-4xl font-light mb-6">Vercel</h2>
                    <p class="text-xl text-gray-400 font-light leading-relaxed">
                        Deploy directly from GitHub using Vercel.
                    </p>
                </div>
                <div class="space-y-12 border-l border-gray-800 pl-6">
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 1: Create Project</h3>
                        <p class="text-gray-400 font-light mb-2">Login to Vercel, click <strong>Add New</strong> > <strong>Project</strong>.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 2: Import Code</h3>
                        <p class="text-gray-400 font-light mb-2">Import the code from the <a href="https://github.com/4simpleproblems-v5/" target="_blank" class="text-white hover:underline">4SP's Github</a> repositories.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 3: Deploy</h3>
                        <p class="text-gray-400 font-light mb-2">
                            Name your project and click <strong>Deploy</strong>. DM the URL to <a href="https://discord.com/users/1380703045754552340" target="_blank" class="text-white underline hover:text-gray-300">4SP on Discord</a>.
                        </p>
                    </div>
                </div>
            </div>

            <div id="content-fastly" class="tab-content space-y-12">
                <div class="mb-8">
                    <span class="text-sm font-light text-red-400 uppercase tracking-widest mb-2 block">Edge Cloud</span>
                    <h2 class="text-4xl font-light mb-6">Fastly</h2>
                    <p class="text-xl text-gray-400 font-light leading-relaxed">
                        Create a CDN service pointing to 4SP.
                    </p>
                </div>
                <div class="space-y-12 border-l border-gray-800 pl-6">
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 1: Create Service</h3>
                        <p class="text-gray-400 font-light mb-2">Login to Fastly. Click <strong>Create Service</strong> > <strong>CDN</strong>.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 2: Set Domain</h3>
                        <p class="text-gray-400 font-light mb-2">Enter your Dynu domain or use <code>{name}.global.ssl.fastly.net</code>.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 3: Set Origin</h3>
                        <p class="text-gray-400 font-light mb-2">Set Host/Origin to the URL: <code>4simpleproblems.kozow.com</code>.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 4: Activate</h3>
                        <p class="text-gray-400 font-light mb-2">
                            Click Activate. DM the URL to <a href="https://discord.com/users/1380703045754552340" target="_blank" class="text-red-400 underline hover:text-red-300">4SP on Discord</a>.
                        </p>
                    </div>
                </div>
            </div>

            <div id="content-domain" class="tab-content space-y-12">
                <div class="mb-8">
                    <span class="text-sm font-light text-green-400 uppercase tracking-widest mb-2 block">General Guide</span>
                    <h2 class="text-4xl font-light mb-6">Get a Free Domain (Dynu)</h2>
                    <p class="text-xl text-gray-400 font-light leading-relaxed">
                        Create a free custom domain to use with any service.
                    </p>
                </div>
                <div class="space-y-12 border-l border-gray-800 pl-6">
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 1: Sign Up</h3>
                        <p class="text-gray-400 font-light mb-2">Create an account at <a href="https://www.dynu.com/" class="text-green-400 hover:underline">dynu.com</a>.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-light text-white mb-4">Step 2: Create URL</h3>
                        <p class="text-gray-400 font-light mb-2">Go to DDNS Services > Add. Fill out Option 1 with your desired name.</p>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <footer class="border-t border-gray-900 py-8 mt-auto">
        <div class="mx-auto max-w-7xl px-4 text-center text-gray-500 text-sm font-light">
            &copy; 2025 4simpleproblems (4SP). Built for students.
            <span class="mx-2 text-gray-800">|</span>
            <a href="legal.html" class="hover:text-gray-300 transition">Legal</a>
        </div>
    </footer>

    <script>
        function switchTab(tabId, updateHash = true) {
            // Reset Buttons
            document.querySelectorAll('.custom-tab-btn').forEach(btn => btn.classList.remove('active'));
            // Hide Content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            // Activate Selection
            document.getElementById('btn-' + tabId).classList.add('active');
            document.getElementById('content-' + tabId).classList.add('active');

            // Update Title Gradient
            const titleEl = document.getElementById('main-title');
            titleEl.className = 'gradient-text font-bold'; // Reset base classes
            if (tabId === 'dynu') titleEl.classList.add('gradient-dynu');
            else if (tabId === 'github') titleEl.classList.add('gradient-github');
            else if (tabId === 'cloudflare') titleEl.classList.add('gradient-cloudflare');
            else if (tabId === 'vercel') titleEl.classList.add('gradient-vercel');
            else if (tabId === 'fastly') titleEl.classList.add('gradient-fastly');
            else if (tabId === 'domain') titleEl.classList.add('gradient-domain');

            // Set URL Hash without scrolling (unless it's initial load)
            if (updateHash) {
                // Using pushState prevents the default jump behavior if we want custom smooth scroll later, 
                // but for now, simple hash setting is fine. 
                // However, to prevent "jumping" if already there:
                if (history.pushState) {
                    history.pushState(null, null, '#' + tabId);
                } else {
                    window.location.hash = tabId;
                }
            }
        }

        // Copy Code Function for Cloudflare
        function copyCloudflareCode() {
            const codeText = document.getElementById('cf-code').innerText;
            navigator.clipboard.writeText(codeText).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
                setTimeout(() => {
                    btn.innerHTML = '<i class="fa-regular fa-copy"></i> Copy Code';
                }, 2000);
            });
        }

        // Cloudflare Version Switching
        function setCloudflareVersion(version) {
            const stdBtn = document.getElementById('cf-ver-std');
            const maxBtn = document.getElementById('cf-ver-max');
            const codeEl = document.getElementById('cf-code');

            let targetHost = "4simpleproblems.kozow.com";

            if (version === 'max') {
                targetHost = "4sp-max.giize.com";
                maxBtn.classList.add('active');
                stdBtn.classList.remove('active');
            } else {
                stdBtn.classList.add('active');
                maxBtn.classList.remove('active');
            }

            // Reconstruct code block with correct host and syntax highlighting
            codeEl.innerHTML = `<span class="code-keyword">export default</span> {
  <span class="code-keyword">async</span> <span class="code-function">fetch</span>(request, env, ctx) {
    <span class="code-keyword">const</span> ORIGIN_HOST = <span class="code-string">"${targetHost}"</span>;

    <span class="code-keyword">const</span> url = <span class="code-keyword">new</span> URL(request.url);

    <span class="code-comment">// Build the origin URL with full path + query</span>
    <span class="code-keyword">const</span> originUrl = <span class="code-keyword">new</span> URL(request.url);
    originUrl.hostname = ORIGIN_HOST;
    originUrl.protocol = <span class="code-string">"https:"</span>;

    <span class="code-comment">// Forward request to origin</span>
    <span class="code-keyword">const</span> response = <span class="code-keyword">await</span> fetch(originUrl.toString(), {
      method: request.method,
      headers: request.headers,
      body: request.method === <span class="code-string">"GET"</span> || request.method === <span class="code-string">"HEAD"</span>
        ? <span class="code-keyword">null</span>
        : request.body,
      redirect: <span class="code-string">"manual"</span>,
    });

    <span class="code-comment">// Clone headers so we can safely modify them</span>
    <span class="code-keyword">const</span> newHeaders = <span class="code-keyword">new</span> Headers(response.headers);

    <span class="code-comment">// Optional but recommended</span>
    newHeaders.set(<span class="code-string">"X-Proxied-By"</span>, <span class="code-string">"Cloudflare-Worker-4SP"</span>);
    newHeaders.set(<span class="code-string">"Cache-Control"</span>, <span class="code-string">"public, max-age=600"</span>);

    <span class="code-keyword">return new</span> Response(response.body, {
      status: response.status,
      statusText: response.statusText,
      headers: newHeaders,
    });
  }
};`;
        }

        // Initialize on Load
        const validTabs = ['dynu', 'github', 'cloudflare', 'vercel', 'fastly', 'domain'];

        function handleHash() {
            const hash = window.location.hash.substring(1);
            if (hash && validTabs.includes(hash)) {
                switchTab(hash, false); // Don't pushState if we are just loading from hash
            }
        }

        window.addEventListener('load', handleHash);
        window.addEventListener('hashchange', handleHash);

    </script>

</body>
</html>
